{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["function catApiFetchTemplate(endPoint, inputParams) {\n  const CORE_LINK = 'https://api.thecatapi.com';\n  const END_POINT = endPoint;\n\n  const params = new URLSearchParams(inputParams);\n\n  return fetch(\n    `${CORE_LINK}${END_POINT}?${params}`\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n\n    return response.json();\n  })\n}\n\nexport const fetchBreeds = () => {\n  return catApiFetchTemplate('/v1/breeds');\n}\n\nexport const fetchCatImgByBreed = (breed) => {\n  return catApiFetchTemplate(\n    '/v1/images/search',\n    {\n      breed_ids: breed\n    });\n}\n\nexport const fetchCatInfoByBreed = (breed) => {\n  return catApiFetchTemplate(\n    '/v1/breeds',\n    {\n      breed_ids: breed\n    });\n}","import axios from \"axios\";\nimport * as CatApi from \"./cat-api\";\n\naxios.defaults.headers.common[\"x-api-key\"] = \"live_93kzxPqZS9E6ojCL8XkLA4w6GnhQGrGXpUQVK67EZJHlYyynejv0lm0RzZHOnfPA\";\n\nconst selectInput = document.querySelector('select.breed-select');\nconst catInfo = document.querySelector('div.cat-info');\nconst loader = document.querySelector('p.loader');\nconst error = document.querySelector('p.error');\n\nif (selectInput.classList.contains('hidden')){\n  selectInput.classList.remove('hidden');\n}\nloader.classList.add('hidden');\nerror.classList.add('hidden');\n\nCatApi.fetchBreeds().then(response => {\n  selectInput.insertAdjacentHTML(\n    'beforeend',\n    createSelectOptionsMarkup(response)\n  )\n}).catch((err) => {\n  error.classList.remove('hidden');\n  selectInput.classList.add('hidden');\n  console.error(err);\n});\n\nselectInput.addEventListener('input', (evt) => {\n  catInfo.innerHTML = '';\n\n  loader.classList.remove('hidden');\n\n  CatApi.fetchCatImgByBreed(evt.target.value).then(( data ) => {\n    const elem = data.map(({ url }) => url);\n\n    loader.classList.add('hidden');\n\n    catInfo.insertAdjacentHTML(\n      \"afterbegin\",\n      createCatImageMarkup(elem.toString())\n    );\n  }).catch((err) => {\n    error.classList.remove('hidden');\n    selectInput.classList.add('hidden');\n    console.error(err);\n  });\n\n  CatApi.fetchCatInfoByBreed(evt.target.value).then(data => {\n    loader.classList.add('hidden');\n\n    const elem = data\n      .filter(({ id }) => id === evt.target.value)\n      .map(({ name, description, temperament }) =>\n        catInfo.insertAdjacentHTML(\n          'beforeend',\n          createCatTextMarkup(name, description, temperament)\n        )\n    );\n  }).catch((err) => {\n    error.classList.remove('hidden');\n    selectInput.classList.add('hidden');\n    console.error(err);\n  });\n});\n\nfunction createSelectOptionsMarkup(arr) {\n  return arr.map(({id, name}) => `\n  <option value=\"${id}\">${name}</option>\n  `\n  )\n};\n\nfunction createCatImageMarkup(url) {\n  return `\n  <img src=${url} alt=\"Cat Image\">\n  `\n}\n\nfunction createCatTextMarkup(name, desc, temperament) {\n  return `\n  <div>\n    <h3>${name}</h3>\n    <p>${desc}</p>\n    <p><b>Temperament:</b> ${temperament}</p>\n  </div>\n  `\n}"],"names":["catApiFetchTemplate","endPoint","inputParams","CORE_LINK","END_POINT","params","response","fetchBreeds","fetchCatImgByBreed","breed","fetchCatInfoByBreed","axios","selectInput","catInfo","loader","error","CatApi.fetchBreeds","createSelectOptionsMarkup","err","evt","CatApi.fetchCatImgByBreed","data","elem","url","createCatImageMarkup","CatApi.fetchCatInfoByBreed","id","name","description","temperament","createCatTextMarkup","arr","desc"],"mappings":"svBAAA,SAASA,EAAoBC,EAAUC,EAAa,CAClD,MAAMC,EAAY,4BACZC,EAAYH,EAEZI,EAAS,IAAI,gBAAgBH,CAAW,EAE9C,OAAO,MACL,GAAGC,IAAYC,KAAaC,GAChC,EAAI,KAAKC,GAAY,CACjB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAGrC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEO,MAAMC,EAAc,IAClBP,EAAoB,YAAY,EAG5BQ,EAAsBC,GAC1BT,EACL,oBACA,CACE,UAAWS,CACjB,CAAK,EAGQC,EAAuBD,GAC3BT,EACL,aACA,CACE,UAAWS,CACjB,CAAK,EC/BLE,EAAM,SAAS,QAAQ,OAAO,aAAe,wEAE7C,MAAMC,EAAc,SAAS,cAAc,qBAAqB,EAC1DC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAS,SAAS,cAAc,UAAU,EAC1CC,EAAQ,SAAS,cAAc,SAAS,EAE1CH,EAAY,UAAU,SAAS,QAAQ,GACzCA,EAAY,UAAU,OAAO,QAAQ,EAEvCE,EAAO,UAAU,IAAI,QAAQ,EAC7BC,EAAM,UAAU,IAAI,QAAQ,EAE5BC,EAAoB,EAAC,KAAKV,GAAY,CACpCM,EAAY,mBACV,YACAK,EAA0BX,CAAQ,CACnC,CACH,CAAC,EAAE,MAAOY,GAAQ,CAChBH,EAAM,UAAU,OAAO,QAAQ,EAC/BH,EAAY,UAAU,IAAI,QAAQ,EAClC,QAAQ,MAAMM,CAAG,CACnB,CAAC,EAEDN,EAAY,iBAAiB,QAAUO,GAAQ,CAC7CN,EAAQ,UAAY,GAEpBC,EAAO,UAAU,OAAO,QAAQ,EAEhCM,EAA0BD,EAAI,OAAO,KAAK,EAAE,KAAOE,GAAU,CAC3D,MAAMC,EAAOD,EAAK,IAAI,CAAC,CAAE,IAAAE,CAAG,IAAOA,CAAG,EAEtCT,EAAO,UAAU,IAAI,QAAQ,EAE7BD,EAAQ,mBACN,aACAW,EAAqBF,EAAK,UAAU,CAC1C,CACA,CAAG,EAAE,MAAOJ,GAAQ,CAChBH,EAAM,UAAU,OAAO,QAAQ,EAC/BH,EAAY,UAAU,IAAI,QAAQ,EAClC,QAAQ,MAAMM,CAAG,CACrB,CAAG,EAEDO,EAA2BN,EAAI,OAAO,KAAK,EAAE,KAAKE,GAAQ,CACxDP,EAAO,UAAU,IAAI,QAAQ,EAEhBO,EACV,OAAO,CAAC,CAAE,GAAAK,CAAI,IAAKA,IAAOP,EAAI,OAAO,KAAK,EAC1C,IAAI,CAAC,CAAE,KAAAQ,EAAM,YAAAC,EAAa,YAAAC,CAAa,IACtChB,EAAQ,mBACN,YACAiB,EAAoBH,EAAMC,EAAaC,CAAW,CACnD,CACH,CACN,CAAG,EAAE,MAAOX,GAAQ,CAChBH,EAAM,UAAU,OAAO,QAAQ,EAC/BH,EAAY,UAAU,IAAI,QAAQ,EAClC,QAAQ,MAAMM,CAAG,CACrB,CAAG,CACH,CAAC,EAED,SAASD,EAA0Bc,EAAK,CACtC,OAAOA,EAAI,IAAI,CAAC,CAAC,GAAAL,EAAI,KAAAC,CAAI,IAAM;AAAA,mBACdD,MAAOC;AAAA,GAEvB,CACH,CAEA,SAASH,EAAqBD,EAAK,CACjC,MAAO;AAAA,aACIA;AAAA,GAEb,CAEA,SAASO,EAAoBH,EAAMK,EAAMH,EAAa,CACpD,MAAO;AAAA;AAAA,UAECF;AAAA,SACDK;AAAA,6BACoBH;AAAA;AAAA,GAG7B"}