{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from \"axios\";\naxios.defaults.headers.common[\"x-api-key\"] = \"live_93kzxPqZS9E6ojCL8XkLA4w6GnhQGrGXpUQVK67EZJHlYyynejv0lm0RzZHOnfPA\";\n\nexport const fetchBreeds = () => {\n  return catApiFetchTemplate('/v1/breeds');\n}\n\nexport const fetchCatByBreed = (breed) => {\n  return catApiFetchTemplate(\n    '/v1/images/search',\n    {\n      api_key: 'live_93kzxPqZS9E6ojCL8XkLA4w6GnhQGrGXpUQVK67EZJHlYyynejv0lm0RzZHOnfPA',\n      breed_ids: breed\n    });\n}\n\nfunction catApiFetchTemplate(endPoint, inputParams) {\n  const CORE_LINK = 'https://api.thecatapi.com';\n  const END_POINT = endPoint;\n\n  const params = new URLSearchParams(inputParams);\n\n  return fetch(\n    `${CORE_LINK}${END_POINT}?${params}`,\n    {\n      headers: {\n\n      }\n    }\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n\n    return response.json();\n  })\n}","import SlimSelect from \"slim-select\";\nimport \"slim-select/styles\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\naxios.defaults.headers.common[\"x-api-key\"] = \"live_93kzxPqZS9E6ojCL8XkLA4w6GnhQGrGXpUQVK67EZJHlYyynejv0lm0RzZHOnfPA\";\n\nimport * as CatApi from \"./cat-api\";\n\nconst selectInput = document.querySelector('select.breed-select');\nconst catInfo = document.querySelector('div.cat-info');\nconst loader = document.querySelector('p.loader');\nconst error = document.querySelector('p.error');\n\nhide(error);\nhide(selectInput);\nhide(catInfo);\n\nCatApi.fetchBreeds().then(response => {\n  hide(loader);\n  show(selectInput);\n\n  new SlimSelect({\n    select: selectInput,\n    data: slimSelectData(response),\n\n    events: {\n      afterChange: (newVal) => {\n        const value = newVal.map(({ value }) => value);\n        getCat(value);\n      }\n    }\n  });\n}).catch((err) => {\n  displayError(err)\n});\n\nfunction getCat(evt) {\n  catInfo.innerHTML = ''\n\n  show(loader);\n\n  CatApi.fetchCatByBreed(evt).then(( data ) => {\n    const url = data.map(({ url }) => url).toString();\n    const name = data.map(elem => elem.breeds).flat().map(({ name }) => name).toString();\n    const description = data.map(elem => elem.breeds).flat().map(({ description }) => description).toString();\n    const temperament = data.map(elem => elem.breeds).flat().map(({ temperament }) => temperament).toString();\n\n    if (data.length === 0) {\n      throw new Error(\"Cat not found\")\n    }\n\n    catInfo.insertAdjacentHTML(\n      \"afterbegin\",\n      createCatMarkup(url, name, description, temperament)\n    );\n\n    hide(loader);\n    show(catInfo);\n\n  }).catch((err) => {\n    displayError(err);\n  });\n};\n\nfunction hide(element) {\n  element.classList.add('hidden');\n}\n\nfunction show(element) {\n  element.classList.remove('hidden');\n}\n\nfunction displayError(err) {\n  iziToastPopup(err)\n  hide(loader);\n  hide(selectInput);\n  hide(document.querySelector('.ss-main'));\n  console.error(err);\n}\n\nfunction iziToastPopup(text) {\n  return iziToast.show({\n    title: `${text}`,\n    message: 'Oops! Something went wrong! Try reloading the page!',\n    color: 'red',\n    position: 'topRight',\n    timeout: false,\n  })\n}\n\nfunction slimSelectData(arr) {\n  return arr.map(({id, name}) => (\n    {text: name, value: id}\n  )\n  )\n};\n\nfunction createCatMarkup(url, name, desc, temperament) {\n  return `\n  <img class='cat-img' src=${url} alt=\"Cat Image\">\n  <div class=\"cat-text\">\n    <h3>${name}</h3>\n    <p>${desc}</p>\n    <p><b>Temperament:</b> ${temperament}</p>\n  </div>\n  `\n}"],"names":["axios","fetchBreeds","catApiFetchTemplate","fetchCatByBreed","breed","endPoint","inputParams","CORE_LINK","END_POINT","params","response","selectInput","catInfo","loader","error","hide","CatApi.fetchBreeds","show","SlimSelect","slimSelectData","newVal","value","getCat","err","displayError","evt","CatApi.fetchCatByBreed","data","url","name","elem","description","temperament","createCatMarkup","element","iziToastPopup","text","iziToast","arr","id","desc"],"mappings":"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"}